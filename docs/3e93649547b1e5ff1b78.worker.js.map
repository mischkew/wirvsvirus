{"version":3,"sources":["../webpack/bootstrap","../node_modules/js-priority-queue/priority-queue.js","../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","actorGeneration.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","pathGeneration.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","simulation.js","simulationWorker.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","e","u","f","Error","code","length","1","_dereq_","AbstractPriorityQueue","ArrayStrategy","BHeapStrategy","BinaryHeapStrategy","PriorityQueue","hasProp","superClass","options","strategy","comparator","a","b","__super__","constructor","this","child","parent","ctor","extend","2","ref","priv","initialValues","queue","dequeue","peek","clear","3","binarySearchForIndexReversed","array","high","low","mid","data","slice","sort","reverse","pos","splice","pop","4","arr","j","k","len","ref1","shift","pageSize","_shift","_emptyMemoryPageTemplate","push","_memory","_mask","_write","_bubbleUp","ret","val","_read","_bubbleDown","index","page","compare","indexInPage","parentIndex","parentValue","childIndex1","childIndex2","childValue1","childValue2","5","_heapify","last","x","left","minIndex","right","_arrayLikeToArray","arr2","Array","_slicedToArray","isArray","iterator","_arr","_n","_d","_e","undefined","_s","_i","next","done","err","minLen","toString","from","test","TypeError","sampleRange","variance","Math","random","generateScheduleEntry","template","stations","entry","station","floor","probability","stay_until","time","sampledMinutes","sampleTime","_defineProperty","obj","configurable","writable","generatePredecessorMap","start","seen","Set","predecessor","add","currentStation","next_stops","forEach","has","keys","generatePathFromPredecessorMap","map","end","path","unshift","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","apply","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","_createClass","protoProps","staticProps","compareDateTime","day","TimeQueue","travel_queue","item","callback","Actor","status","schedule","current_station","current_schedule","state","path_position","sim","advancePath","onNext","actorWaitsForDeparture","actor","destination","nextPathStop","onArrivedAtDestination","arriveAtScheduleLocation","currentScheduleExpired","advanceSchedule","scheduleWait","preparePath","onAlreadyThere","onPrepared","_cycleSchedule","predecessorMaps","chance","buildActors","actorsData","actorData","arguments","source","getOwnPropertyDescriptors","defineProperties","Simulator","actors","idle_queue","recover_queue","station_queues","fromEntries","entries","tick","arrivalCallback","finishStayCallback","waitCallback","ticked","onNextDay","until","timeToMinutes","queueItem","enqueue","infection_chance","reduce","acc","tryInfect","infect","stepTime","dequeueExpired","stayFinished","arrivedActors","arriveAtNextPathStop","healedActor","nextStations","handleInfectionTrigger","allMaps","simulator","stationPositions","isRunning","setupSimulation","simulationOptions","actorTemplate","station_names","count","scheduleTemplate","generateActors","maps","generatePredecessorMaps","startActors","Map","_ref","_ref2","id","lat","lng","runSimulation","updateInterval","ticks","loop","requestAnimationFrame","agents","step","encodedAgents","agent","nextStation","encodeAgents","postMessage","destroySimulation","addEventListener","type","method","params","__webpack_exports__","Promise","resolve","then","reject","result","catch","error","message","stack"],"mappings":"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","file":"3e93649547b1e5ff1b78.worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.PriorityQueue = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\nvar AbstractPriorityQueue, ArrayStrategy, BHeapStrategy, BinaryHeapStrategy, PriorityQueue,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nAbstractPriorityQueue = _dereq_('./PriorityQueue/AbstractPriorityQueue');\n\nArrayStrategy = _dereq_('./PriorityQueue/ArrayStrategy');\n\nBinaryHeapStrategy = _dereq_('./PriorityQueue/BinaryHeapStrategy');\n\nBHeapStrategy = _dereq_('./PriorityQueue/BHeapStrategy');\n\nPriorityQueue = (function(superClass) {\n  extend(PriorityQueue, superClass);\n\n  function PriorityQueue(options) {\n    options || (options = {});\n    options.strategy || (options.strategy = BinaryHeapStrategy);\n    options.comparator || (options.comparator = function(a, b) {\n      return (a || 0) - (b || 0);\n    });\n    PriorityQueue.__super__.constructor.call(this, options);\n  }\n\n  return PriorityQueue;\n\n})(AbstractPriorityQueue);\n\nPriorityQueue.ArrayStrategy = ArrayStrategy;\n\nPriorityQueue.BinaryHeapStrategy = BinaryHeapStrategy;\n\nPriorityQueue.BHeapStrategy = BHeapStrategy;\n\nmodule.exports = PriorityQueue;\n\n\n},{\"./PriorityQueue/AbstractPriorityQueue\":2,\"./PriorityQueue/ArrayStrategy\":3,\"./PriorityQueue/BHeapStrategy\":4,\"./PriorityQueue/BinaryHeapStrategy\":5}],2:[function(_dereq_,module,exports){\nvar AbstractPriorityQueue;\n\nmodule.exports = AbstractPriorityQueue = (function() {\n  function AbstractPriorityQueue(options) {\n    var ref;\n    if ((options != null ? options.strategy : void 0) == null) {\n      throw 'Must pass options.strategy, a strategy';\n    }\n    if ((options != null ? options.comparator : void 0) == null) {\n      throw 'Must pass options.comparator, a comparator';\n    }\n    this.priv = new options.strategy(options);\n    this.length = (options != null ? (ref = options.initialValues) != null ? ref.length : void 0 : void 0) || 0;\n  }\n\n  AbstractPriorityQueue.prototype.queue = function(value) {\n    this.length++;\n    this.priv.queue(value);\n    return void 0;\n  };\n\n  AbstractPriorityQueue.prototype.dequeue = function(value) {\n    if (!this.length) {\n      throw 'Empty queue';\n    }\n    this.length--;\n    return this.priv.dequeue();\n  };\n\n  AbstractPriorityQueue.prototype.peek = function(value) {\n    if (!this.length) {\n      throw 'Empty queue';\n    }\n    return this.priv.peek();\n  };\n\n  AbstractPriorityQueue.prototype.clear = function() {\n    this.length = 0;\n    return this.priv.clear();\n  };\n\n  return AbstractPriorityQueue;\n\n})();\n\n\n},{}],3:[function(_dereq_,module,exports){\nvar ArrayStrategy, binarySearchForIndexReversed;\n\nbinarySearchForIndexReversed = function(array, value, comparator) {\n  var high, low, mid;\n  low = 0;\n  high = array.length;\n  while (low < high) {\n    mid = (low + high) >>> 1;\n    if (comparator(array[mid], value) >= 0) {\n      low = mid + 1;\n    } else {\n      high = mid;\n    }\n  }\n  return low;\n};\n\nmodule.exports = ArrayStrategy = (function() {\n  function ArrayStrategy(options) {\n    var ref;\n    this.options = options;\n    this.comparator = this.options.comparator;\n    this.data = ((ref = this.options.initialValues) != null ? ref.slice(0) : void 0) || [];\n    this.data.sort(this.comparator).reverse();\n  }\n\n  ArrayStrategy.prototype.queue = function(value) {\n    var pos;\n    pos = binarySearchForIndexReversed(this.data, value, this.comparator);\n    this.data.splice(pos, 0, value);\n    return void 0;\n  };\n\n  ArrayStrategy.prototype.dequeue = function() {\n    return this.data.pop();\n  };\n\n  ArrayStrategy.prototype.peek = function() {\n    return this.data[this.data.length - 1];\n  };\n\n  ArrayStrategy.prototype.clear = function() {\n    this.data.length = 0;\n    return void 0;\n  };\n\n  return ArrayStrategy;\n\n})();\n\n\n},{}],4:[function(_dereq_,module,exports){\nvar BHeapStrategy;\n\nmodule.exports = BHeapStrategy = (function() {\n  function BHeapStrategy(options) {\n    var arr, i, j, k, len, ref, ref1, shift, value;\n    this.comparator = (options != null ? options.comparator : void 0) || function(a, b) {\n      return a - b;\n    };\n    this.pageSize = (options != null ? options.pageSize : void 0) || 512;\n    this.length = 0;\n    shift = 0;\n    while ((1 << shift) < this.pageSize) {\n      shift += 1;\n    }\n    if (1 << shift !== this.pageSize) {\n      throw 'pageSize must be a power of two';\n    }\n    this._shift = shift;\n    this._emptyMemoryPageTemplate = arr = [];\n    for (i = j = 0, ref = this.pageSize; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n      arr.push(null);\n    }\n    this._memory = [];\n    this._mask = this.pageSize - 1;\n    if (options.initialValues) {\n      ref1 = options.initialValues;\n      for (k = 0, len = ref1.length; k < len; k++) {\n        value = ref1[k];\n        this.queue(value);\n      }\n    }\n  }\n\n  BHeapStrategy.prototype.queue = function(value) {\n    this.length += 1;\n    this._write(this.length, value);\n    this._bubbleUp(this.length, value);\n    return void 0;\n  };\n\n  BHeapStrategy.prototype.dequeue = function() {\n    var ret, val;\n    ret = this._read(1);\n    val = this._read(this.length);\n    this.length -= 1;\n    if (this.length > 0) {\n      this._write(1, val);\n      this._bubbleDown(1, val);\n    }\n    return ret;\n  };\n\n  BHeapStrategy.prototype.peek = function() {\n    return this._read(1);\n  };\n\n  BHeapStrategy.prototype.clear = function() {\n    this.length = 0;\n    this._memory.length = 0;\n    return void 0;\n  };\n\n  BHeapStrategy.prototype._write = function(index, value) {\n    var page;\n    page = index >> this._shift;\n    while (page >= this._memory.length) {\n      this._memory.push(this._emptyMemoryPageTemplate.slice(0));\n    }\n    return this._memory[page][index & this._mask] = value;\n  };\n\n  BHeapStrategy.prototype._read = function(index) {\n    return this._memory[index >> this._shift][index & this._mask];\n  };\n\n  BHeapStrategy.prototype._bubbleUp = function(index, value) {\n    var compare, indexInPage, parentIndex, parentValue;\n    compare = this.comparator;\n    while (index > 1) {\n      indexInPage = index & this._mask;\n      if (index < this.pageSize || indexInPage > 3) {\n        parentIndex = (index & ~this._mask) | (indexInPage >> 1);\n      } else if (indexInPage < 2) {\n        parentIndex = (index - this.pageSize) >> this._shift;\n        parentIndex += parentIndex & ~(this._mask >> 1);\n        parentIndex |= this.pageSize >> 1;\n      } else {\n        parentIndex = index - 2;\n      }\n      parentValue = this._read(parentIndex);\n      if (compare(parentValue, value) < 0) {\n        break;\n      }\n      this._write(parentIndex, value);\n      this._write(index, parentValue);\n      index = parentIndex;\n    }\n    return void 0;\n  };\n\n  BHeapStrategy.prototype._bubbleDown = function(index, value) {\n    var childIndex1, childIndex2, childValue1, childValue2, compare;\n    compare = this.comparator;\n    while (index < this.length) {\n      if (index > this._mask && !(index & (this._mask - 1))) {\n        childIndex1 = childIndex2 = index + 2;\n      } else if (index & (this.pageSize >> 1)) {\n        childIndex1 = (index & ~this._mask) >> 1;\n        childIndex1 |= index & (this._mask >> 1);\n        childIndex1 = (childIndex1 + 1) << this._shift;\n        childIndex2 = childIndex1 + 1;\n      } else {\n        childIndex1 = index + (index & this._mask);\n        childIndex2 = childIndex1 + 1;\n      }\n      if (childIndex1 !== childIndex2 && childIndex2 <= this.length) {\n        childValue1 = this._read(childIndex1);\n        childValue2 = this._read(childIndex2);\n        if (compare(childValue1, value) < 0 && compare(childValue1, childValue2) <= 0) {\n          this._write(childIndex1, value);\n          this._write(index, childValue1);\n          index = childIndex1;\n        } else if (compare(childValue2, value) < 0) {\n          this._write(childIndex2, value);\n          this._write(index, childValue2);\n          index = childIndex2;\n        } else {\n          break;\n        }\n      } else if (childIndex1 <= this.length) {\n        childValue1 = this._read(childIndex1);\n        if (compare(childValue1, value) < 0) {\n          this._write(childIndex1, value);\n          this._write(index, childValue1);\n          index = childIndex1;\n        } else {\n          break;\n        }\n      } else {\n        break;\n      }\n    }\n    return void 0;\n  };\n\n  return BHeapStrategy;\n\n})();\n\n\n},{}],5:[function(_dereq_,module,exports){\nvar BinaryHeapStrategy;\n\nmodule.exports = BinaryHeapStrategy = (function() {\n  function BinaryHeapStrategy(options) {\n    var ref;\n    this.comparator = (options != null ? options.comparator : void 0) || function(a, b) {\n      return a - b;\n    };\n    this.length = 0;\n    this.data = ((ref = options.initialValues) != null ? ref.slice(0) : void 0) || [];\n    this._heapify();\n  }\n\n  BinaryHeapStrategy.prototype._heapify = function() {\n    var i, j, ref;\n    if (this.data.length > 0) {\n      for (i = j = 1, ref = this.data.length; 1 <= ref ? j < ref : j > ref; i = 1 <= ref ? ++j : --j) {\n        this._bubbleUp(i);\n      }\n    }\n    return void 0;\n  };\n\n  BinaryHeapStrategy.prototype.queue = function(value) {\n    this.data.push(value);\n    this._bubbleUp(this.data.length - 1);\n    return void 0;\n  };\n\n  BinaryHeapStrategy.prototype.dequeue = function() {\n    var last, ret;\n    ret = this.data[0];\n    last = this.data.pop();\n    if (this.data.length > 0) {\n      this.data[0] = last;\n      this._bubbleDown(0);\n    }\n    return ret;\n  };\n\n  BinaryHeapStrategy.prototype.peek = function() {\n    return this.data[0];\n  };\n\n  BinaryHeapStrategy.prototype.clear = function() {\n    this.length = 0;\n    this.data.length = 0;\n    return void 0;\n  };\n\n  BinaryHeapStrategy.prototype._bubbleUp = function(pos) {\n    var parent, x;\n    while (pos > 0) {\n      parent = (pos - 1) >>> 1;\n      if (this.comparator(this.data[pos], this.data[parent]) < 0) {\n        x = this.data[parent];\n        this.data[parent] = this.data[pos];\n        this.data[pos] = x;\n        pos = parent;\n      } else {\n        break;\n      }\n    }\n    return void 0;\n  };\n\n  BinaryHeapStrategy.prototype._bubbleDown = function(pos) {\n    var last, left, minIndex, right, x;\n    last = this.data.length - 1;\n    while (true) {\n      left = (pos << 1) + 1;\n      right = left + 1;\n      minIndex = pos;\n      if (left <= last && this.comparator(this.data[left], this.data[minIndex]) < 0) {\n        minIndex = left;\n      }\n      if (right <= last && this.comparator(this.data[right], this.data[minIndex]) < 0) {\n        minIndex = right;\n      }\n      if (minIndex !== pos) {\n        x = this.data[minIndex];\n        this.data[minIndex] = this.data[pos];\n        this.data[pos] = x;\n        pos = minIndex;\n      } else {\n        break;\n      }\n    }\n    return void 0;\n  };\n\n  return BinaryHeapStrategy;\n\n})();\n\n\n},{}]},{},[1])(1)\n});","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export const HEALTHY = 0;\nexport const INFECTED = 1;\nexport const RECOVERED = 2;\nexport const DEAD = 3;\n\nexport const WAITING = 0;\nexport const TRASITIONING = 1;\n\nfunction selectRandom(array) {\n  return array[Math.floor(Math.random() * array.length)];\n}\n\nexport function sampleRange(value, variance) {\n  return value - variance + Math.random() * 2 * variance;\n}\n\nfunction sampleTime(time, variance) {\n  const timeInMinutes = (time % 100) + Math.floor(time / 100) * 60;\n  const varianceInMinutes = (variance % 100) + Math.floor(variance / 100) * 60;\n\n  const sampledMinutes = sampleRange(timeInMinutes, varianceInMinutes);\n  return Math.floor(sampledMinutes / 60) * 100 + (sampledMinutes % 60);\n}\n\nexport function generateScheduleEntry(template, stations) {\n  let entry = {};\n  entry.station = selectRandom(stations);\n  entry.name = template.name; // probably not needed\n  entry.probability = sampleRange(\n    template.probability.value,\n    template.probability.variance\n  );\n\n  entry.stay_until = Math.floor(\n    sampleTime(template.stay_until.time, template.stay_until.variance)\n  );\n\n  return entry;\n}\n\nexport function generateActors(actorTemplate, stations) {\n  const station_names = Object.keys(stations);\n  const actors = Array.from(Array(actorTemplate.count).keys()).map(index => {\n    const schedule = actorTemplate.schedule.reduce((acc, scheduleTemplate) => {\n      const entry = generateScheduleEntry(scheduleTemplate, station_names);\n      if (Math.random() < entry.probability) {\n        acc.push(entry);\n      }\n      return acc;\n    }, []);\n    let actor = {\n      status: HEALTHY,\n      schedule,\n      current_station: schedule[0].station,\n      current_schedule: 0,\n      state: WAITING,\n      path: null,\n      path_position: null,\n    };\n\n    return actor;\n  });\n\n  return actors;\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export function generatePredecessorMap(start, stations) {\n  let queue = [];\n  let seen = new Set();\n  let predecessor = {\n    [start]: null,\n  };\n  seen.add(start);\n  queue.push(start);\n\n  while (queue.length > 0) {\n    const currentStation = queue.shift();\n    if (stations[currentStation] === undefined) {\n      throw new Error(\n        `Station ${currentStation} not in station list. Type: ${typeof currentStation}`\n      );\n    }\n    stations[currentStation].next_stops.forEach(station => {\n      if (!seen.has(station)) {\n        predecessor[station] = currentStation;\n        seen.add(station);\n        queue.push(station);\n      }\n    });\n  }\n\n  if (Object.keys(predecessor).length < Object.keys(stations).length) {\n    // throw new Error('Graph is not connected!');\n  }\n\n  return predecessor;\n}\n\nexport function getLargestCC(stations) {\n  const map = generatePredecessorMap(Object.keys(stations)[0], stations);\n  const cc = {};\n\n  Object.entries(stations).forEach(([key, value]) => {\n    if (key in map) {\n      cc[key] = value;\n    }\n  });\n\n  return cc;\n}\n\nexport function generatePathFromPredecessorMap(map, end) {\n  let currentStation = end;\n  let path = [];\n  while (currentStation !== null) {\n    path.unshift(currentStation);\n    currentStation = map[currentStation];\n    if (currentStation === undefined) {\n      throw new Error(\n        'Graph is not connected! Maybe there is an unidirectional edge?'\n      );\n    }\n  }\n\n  return path;\n}\n\nexport function generatePath(start, end, stations) {\n  return generatePathFromPredecessorMap(\n    generatePredecessorMap(start, stations),\n    end\n  );\n}\n\nexport function generatePaths(stations) {\n  let paths = {};\n  let maps = {};\n  Object.keys(stations).forEach((station, index, arr) => {\n    maps[station] = generatePredecessorMap(station, stations);\n  });\n\n  Object.entries(maps).forEach(([start, map]) => {\n    paths[start] = {};\n    Object.keys(stations).forEach(end => {\n      paths[start][end] = generatePathFromPredecessorMap(map, end);\n    });\n  });\n\n  return paths;\n}\n\nexport function generatePredecessorMaps(stations) {\n  let maps = {};\n  Object.keys(stations).forEach((station, index, arr) => {\n    maps[station] = generatePredecessorMap(station, stations);\n  });\n\n  return maps;\n}\n","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import PriorityQueue from 'js-priority-queue';\nimport { generatePathFromPredecessorMap } from './pathGeneration';\nimport { INFECTED, RECOVERED, HEALTHY } from './actorGeneration';\n\nconst logging = false;\nexport const WAITING = 0;\nexport const TRANSITIONING = 1;\nexport const TRAVEL_TIME = 10;\nexport const TICKS_PER_MINUTE = 1;\nexport const INFECTION_SPEED = 0.5;\nexport const RECOVERY_TIME = 2; // days\n\nexport const MINUTES_PER_DAY = 24 * 60;\n\nexport function timeToMinutes(time) {\n  return Math.floor(time / 100) * 60 + (time % 100);\n}\n\nexport function minutesToTime(min) {\n  return Math.floor(min / 60) * 100 + (min % 60);\n}\n\nfunction compareDateTime(a, b) {\n  if (a.day < b.day) {\n    return -1;\n  }\n\n  if (a.day > b.day) {\n    return 1;\n  }\n\n  return a.time - b.time;\n}\n\nclass TimeQueue {\n  constructor() {\n    this.queue = this.travel_queue = new PriorityQueue({\n      comparator: compareDateTime,\n      strategy: PriorityQueue.BinaryHeapStrategy,\n    });\n  }\n\n  enqueue({ item, day, time }) {\n    this.queue.queue({ item, day, time });\n  }\n\n  dequeueExpired(day, time, callback) {\n    while (\n      this.queue.length > 0 &&\n      this.queue.peek().day === day &&\n      this.queue.peek().time <= time\n    ) {\n      const item = this.queue.dequeue().item;\n\n      callback(item);\n    }\n  }\n}\n\nexport class Actor {\n  constructor({\n    status,\n    schedule,\n    current_station,\n    current_schedule,\n    state,\n    path,\n    path_position,\n    sim,\n  }) {\n    this.status = status;\n    this.schedule = schedule;\n    this.current_station = current_station;\n    this.current_schedule = current_schedule;\n    this.state = state;\n    this.path = path;\n    this.path_position = path_position;\n    this.sim = sim;\n  }\n\n  arriveAtNextPathStop() {\n    this.state = WAITING;\n\n    this.advancePath({\n      onNext: () => {\n        this.sim.actorWaitsForDeparture({\n          actor: this,\n          station: this.current_station,\n          destination: this.nextPathStop(),\n        });\n      },\n      onArrivedAtDestination: () => {\n        this.arriveAtScheduleLocation();\n      },\n    });\n  }\n\n  arriveAtScheduleLocation() {\n    if (this.currentScheduleExpired()) {\n      this.advanceSchedule();\n    }\n    this.sim.scheduleWait(\n      this,\n      this.schedule[this.current_schedule].stay_until\n    );\n  }\n\n  currentScheduleExpired() {\n    // check if the current schedule entry's stay_until is in the past\n    // the first entry (residence) can never expire\n    // meaning the actor will always wait at home if nothing else is left on the schedule\n    return (\n      this.current_schedule !== 0 &&\n      this.schedule[this.current_schedule].time < this.sim.time\n    );\n  }\n\n  stayFinished() {\n    this.advanceSchedule();\n\n    this.preparePath({\n      onAlreadyThere: () => {\n        this.arriveAtScheduleLocation();\n      },\n      onPrepared: () => {\n        this.sim.actorWaitsForDeparture({\n          actor: this,\n          station: this.current_station,\n          destination: this.nextPathStop(),\n        });\n      },\n    });\n  }\n\n  _cycleSchedule() {\n    if (this.current_schedule === this.schedule.length - 1) {\n      this.current_schedule = 0;\n    } else {\n      this.current_schedule += 1;\n    }\n  }\n\n  advanceSchedule() {\n    // advance the schedule to the next valid position\n    // if at last entry, go back home (schedule 0)\n    this._cycleSchedule();\n\n    // skip any entries, which have a time in the past (cannot go there anymore)\n    while (this.currentScheduleExpired()) {\n      this._cycleSchedule();\n    }\n  }\n\n  advancePath({ onNext, onArrivedAtDestination }) {\n    this.path_position += 1;\n    this.current_station = this.path[this.path_position];\n\n    if (this.path_position === this.path.length - 1) {\n      // arrived at destination\n      this.path = null;\n      this.path_position = null;\n      onArrivedAtDestination();\n    } else {\n      // go to next station in path\n      onNext();\n    }\n  }\n\n  preparePath({ onAlreadyThere, onPrepared }) {\n    const destination = this.schedule[this.current_schedule].station;\n    if (destination === this.current_station) {\n      onAlreadyThere();\n      return;\n    }\n    this.path = generatePathFromPredecessorMap(\n      this.sim.predecessorMaps[this.current_station],\n      destination\n    );\n    this.path_position = 0;\n    onPrepared();\n  }\n\n  nextPathStop() {\n    if (this.path === null || this.path_position === this.path.length - 1) {\n      return null;\n    }\n    return this.path[this.path_position + 1];\n  }\n\n  tryInfect(chance) {\n    return this.status === HEALTHY && chance > Math.random();\n  }\n}\n\nfunction buildActors(actorsData, sim) {\n  return actorsData.map(actorData => {\n    return new Actor({ ...actorData, sim });\n  });\n}\n\nexport class Simulator {\n  constructor(stations, actorsData, predecessorMaps) {\n    this.stations = stations;\n    this.actors = buildActors(actorsData, this);\n    this.predecessorMaps = predecessorMaps;\n    this.time = 6 * 60;\n    this.day = 0;\n    this.travel_queue = new TimeQueue();\n    this.idle_queue = new TimeQueue();\n    this.recover_queue = new TimeQueue();\n    this.station_queues = Object.fromEntries(\n      Object.entries(stations).map(([key, station]) => {\n        const next_stops = Object.fromEntries(\n          station.next_stops.map(station => {\n            return [station, []];\n          })\n        );\n        return [key, next_stops];\n      })\n    );\n    this.tick = 0;\n\n    this.arrivalCallback = () => {};\n    this.finishStayCallback = () => {};\n    this.waitCallback = () => {};\n  }\n\n  startActors() {\n    this.actors.forEach(actor => {\n      actor.arriveAtScheduleLocation();\n    });\n  }\n\n  onNextDay() {\n    this.day += 1;\n  }\n\n  stepTime() {\n    this.tick = this.tick + 1;\n    let ticked = false;\n    if (this.tick >= TICKS_PER_MINUTE) {\n      this.time = this.time + 1;\n      this.tick = 0;\n      ticked = true;\n    }\n    if (this.time === MINUTES_PER_DAY) {\n      this.time = 0;\n      this.onNextDay();\n    }\n    return ticked;\n  }\n\n  actorWaitsForDeparture({ actor, station, destination }) {\n    this.station_queues[station][destination].push(actor);\n  }\n\n  scheduleWait(actor, until) {\n    const time = timeToMinutes(until);\n    const queueItem = {\n      item: actor,\n      day: this.day + (time <= this.time),\n      time,\n    };\n    this.idle_queue.enqueue(queueItem);\n\n    this.waitCallback(actor, queueItem.day, queueItem.time);\n  }\n\n  infect(actor) {\n    actor.status = INFECTED;\n    this.recover_queue.enqueue({\n      item: actor,\n      day: this.day + RECOVERY_TIME,\n      time: this.time,\n    });\n  }\n\n  handleInfectionTrigger(actors) {\n    const infected = actors.reduce((acc, actor) => {\n      return acc + (actor.status === INFECTED ? 1 : 0);\n    }, 0);\n\n    let infection_chance = (infected / actors.length) * INFECTION_SPEED;\n    if (infection_chance > 1) {\n      infection_chance = 1;\n    }\n\n    if (logging && infection_chance > 0) {\n      console.log(\n        `Spreading the infection on ${actors.length} people with chance ${infection_chance}`\n      );\n    }\n\n    actors.forEach(actor => {\n      if (actor.tryInfect(infection_chance)) {\n        this.infect(actor);\n      }\n    });\n  }\n\n  step() {\n    const ticked = this.stepTime();\n    if (!ticked) {\n      return this.actors;\n    }\n\n    this.idle_queue.dequeueExpired(this.day, this.time, actor => {\n      actor.stayFinished();\n      this.finishStayCallback(\n        actor,\n        actor.current_station,\n        actor.nextPathStop(),\n        actor.schedule[actor.current_schedule].name\n      );\n    });\n\n    this.travel_queue.dequeueExpired(this.day, this.time, arrivedActors => {\n      arrivedActors.forEach(actor => {\n        actor.arriveAtNextPathStop();\n        this.arrivalCallback(actor);\n      });\n    });\n\n    this.recover_queue.dequeueExpired(this.day, this.time, healedActor => {\n      healedActor.status = RECOVERED;\n    });\n\n    if (this.time % TRAVEL_TIME === 0) {\n      Object.entries(this.station_queues).forEach(([station, nextStations]) => {\n        Object.entries(nextStations).forEach(([next, actors]) => {\n          if (actors.length > 0) {\n            actors.forEach(actor => {\n              actor.state = TRANSITIONING;\n            });\n            this.travel_queue.enqueue({\n              day:\n                this.day +\n                Math.floor((this.time + TRAVEL_TIME) / MINUTES_PER_DAY),\n              time: (this.time + TRAVEL_TIME) % MINUTES_PER_DAY,\n              item: actors,\n            });\n            this.handleInfectionTrigger(actors);\n            nextStations[next] = [];\n          }\n        });\n      });\n    }\n\n    return this.actors;\n  }\n}\n","import _slicedToArray from\"/Users/sven/Documents/workspace/wirvsvirus/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{generateActors}from'./actorGeneration';import{generatePredecessorMaps}from'./pathGeneration';import{Simulator,WAITING,TRANSITIONING}from'./simulation';var actors=null;var allMaps=null;var simulator=null;var stationPositions=null;// if true, the simulation loop keeps running in the thread\nvar isRunning=false;export function setupSimulation(simulationOptions,stations){if(actors!==null||allMaps!==null||simulator!==null||stationPositions!==null){throw new Error('Simulation already setup. Destroy simulation first via `destroySimulation`.');}actors=generateActors(simulationOptions,stations);allMaps=generatePredecessorMaps(stations);simulator=new Simulator(stations,actors,allMaps);// infect the first actor\nsimulator.infect(simulator.actors[0]);simulator.startActors();stationPositions=new Map(Object.entries(stations).map(function(_ref){var _ref2=_slicedToArray(_ref,2),id=_ref2[0],station=_ref2[1];return[id,[station.lat,station.lng]];}));}/**\n * Encode the agent objects into low-level datastructures which can easily be\n * passed as messages and also passed as attributes to the shader engine.\n * @param {Array} agents List of agent objects\n * @returns {string} Stringified payload\n */function encodeAgents(agents){// console.log(agents[0].schedule);\nfunction encodeAgent(agent){// In order to render a single agent we need:\n// - it's current start path and target path\n// - it's current transitioning status\n// - it's current infection status\n//\n// We compute coordinates as tuples to be able to pass them to `regl`\n// directly\nvar currentStation=null;var nextStation=null;if(agent.state===TRANSITIONING){currentStation=agent.path[agent.path_position];nextStation=agent.path[agent.path_position+1];// cannot overflow, due to TRANSITIONING check\n}else{currentStation=agent.current_station;nextStation=currentStation;// irrelevant in that case as we are not transitioning\n}// console.log('time', JSON.stringify(simulator.time));\n// console.log(\n//   'is transitioning',\n//   JSON.stringify(agent.state === TRANSITIONING)\n// );\n// console.log('path position', JSON.stringify(agent.path_position));\n// console.log('path', JSON.stringify(agent.path));\n// console.log(\n//   'current schedule',\n//   JSON.stringify(agent.schedule[agent.current_schedule])\n// );\n// console.log('current station', currentStation);\n// console.log('next station', nextStation);\nreturn[stationPositions.get(currentStation),stationPositions.get(nextStation),agent.state===WAITING?1.0:0.0,agent.status];}var encodedAgents=agents.map(encodeAgent);return[simulator.day,simulator.time,encodedAgents];}export function runSimulation(updateInterval){// Force the render to render at every `updateInterval` ticks. This will\n// update the message-listener with the new agents every `updateInterval`\n// ticks.\nif(updateInterval===undefined){updateInterval=1;}if(isRunning){throw new Error('Simulation is already running. Destroy simulation first via `destroySimulation`');}isRunning=true;var ticks=0;function loop(){if(isRunning){requestAnimationFrame(loop);}// console.time('sim');\nvar agents=simulator.step();// console.timeEnd('sim');\nticks++;if(ticks>=updateInterval){ticks=0;// console.time('encode');\nvar e=encodeAgents(agents);// console.timeEnd('encode');\n// console.time('post');\npostMessage(e);// console.timeEnd('post');\n}}loop();}export function destroySimulation(){isRunning=false;actors=null;allMaps=null;simulator=null;stationPositions=null;}\naddEventListener('message', function (e) {var ref = e.data;var type = ref.type;var method = ref.method;var id = ref.id;var params = ref.params;var f,p;if (type === 'RPC' && method) {if (f = __webpack_exports__[method]) {p = Promise.resolve().then(function () { return f.apply(__webpack_exports__, params); });} else {p = Promise.reject('No such method');}p.then(function (result) {postMessage({type: 'RPC',id: id,result: result});}).catch(function (e) {var error = {message: e};if (e.stack) {error.message = e.message;error.stack = e.stack;error.name = e.name;}postMessage({type: 'RPC',id: id,error: error});});}});postMessage({type: 'RPC',method: 'ready'});"],"sourceRoot":""}